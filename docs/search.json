[
  {
    "objectID": "exercise_21.html",
    "href": "exercise_21.html",
    "title": "Daily Assignment 21",
    "section": "",
    "text": "library(dataRetrieval)\nlibrary(dplyr)\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\nlibrary(tsibble)\n\nRegistered S3 method overwritten by 'tsibble':\n  method               from \n  as_tibble.grouped_df dplyr\n\n\n\nAttaching package: 'tsibble'\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, union\n\n# Example: Cache la Poudre River at Mouth (USGS site 06752260)\npoudre_flow &lt;- readNWISdv(siteNumber = \"06752260\",    # Download data from USGS for site 06752260\n                          parameterCd = \"00060\",      # Parameter code 00060 = discharge in cfs)\n                          startDate = \"2013-01-01\",   # Set the start date\n                          endDate = \"2023-12-31\") |&gt;  # Set the end date\n  renameNWISColumns() |&gt;                              # Rename columns to standard names (e.g., \"Flow\", \"Date\")\n  mutate(Date = yearmonth(Date)) |&gt;                   # Convert daily Date values into a year-month format (e.g., \"2023 Jan\")\n  group_by(Date) |&gt;                                   # Group the data by the new monthly Date\n  summarise(Flow = mean(Flow))                       # Calculate the average daily flow for each month\n\nGET:https://waterservices.usgs.gov/nwis/dv/?site=06752260&format=waterml%2C1.1&ParameterCd=00060&StatCd=00003&startDT=2013-01-01&endDT=2023-12-31\n\n\n\nCovert to tsibble\n\nUse as_tsibble() to convert the data.frame into a tsibble object. This will allow you to use the feast functions for time series analysis\n\npoudre_tbl &lt;- as_tsibble(poudre_flow)\n\nUsing `Date` as index variable.\n\nhead(poudre_tbl)\n\n# A tsibble: 6 x 2 [1M]\n      Date   Flow\n     &lt;mth&gt;  &lt;dbl&gt;\n1 2013 Jan  18.1 \n2 2013 Feb  18.0 \n3 2013 Mar   8.21\n4 2013 Apr   5.94\n5 2013 May 333.  \n6 2013 Jun 300.  \n\n\n\n\n\nPlotting the time series\n\nUse ggplot to plot the time series data. Animate this plot with plotly\n\nlibrary(ggplot2)\nlibrary(plotly)\n\n\nAttaching package: 'plotly'\n\n\nThe following object is masked from 'package:ggplot2':\n\n    last_plot\n\n\nThe following object is masked from 'package:stats':\n\n    filter\n\n\nThe following object is masked from 'package:graphics':\n\n    layout\n\npoudre_plot &lt;- ggplot(poudre_tbl, aes(x = Date, y = Flow)) +\n  geom_line(color = \"steelblue\") +\n  labs(title = \"Monthly Streamflow of Cache la Poudre River\",\n       x = \"Date\", y = \"Average Monthly Flow\") +\n  theme_minimal()\n\nggplotly(poudre_plot)\n\n\n\n\n\n\n\n\nSubseries\n\nUse gg_subseries to visualize the seasonal patterns in the data. This will help you identify any trends or seasonal cycles in the streamflow data.\n\nlibrary(feasts)\n\nLoading required package: fabletools\n\ngg_subseries(poudre_tbl) +\n  labs(title = \"Monthly Streamflow\",\n       x = \"Year\", y = \"Flow\") +\n  theme_minimal()\n\nPlot variable not specified, automatically selected `y = Flow`\n\n\n\n\n\n\n\n\n\n\n\nDescribe what you see in the plot. How are “seasons” defined in this plot? What do you think the “subseries” represent?\nThe plot shows a seasonal pattern in streamflow for the Cache la Poudre River. You can see that streamflow peaks in May-June, which can be classified as late spring and early summer. This is most likely due to snow melt as the weather gets warmer in these months. You can also see that streamflow is lowest in November-Febuary, which can be classified as late fall and winter."
  }
]